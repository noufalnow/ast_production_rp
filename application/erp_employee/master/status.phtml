<div class="dynamic-popup" id="dynamic-popup">
	<!--  -->
	<form name="form" method="post" id="edit"
		action='erp_employee/master/status/ref/<?=$this->param['ref']?>'
		style="margin-bottom: 0px;">
	
		<div class="modal-content modal-content-demo">
			<div class="modal-header">
				<h4 class="card-title">Employee Status</h4>
				<button type="button" aria-label="Close" class="btn-close" data-bs-dismiss="modal">
					<span aria-hidden="true">Ã—</span>
				</button>
			</div>
            <div class="modal-body">
                <div class="row mb-4" style="margin-top: 15px;">
                    <label class="col-sm-3 form-label">Status</label>
                    <div class="col-sm-9">
                        <?=$this->form->statusType->show()?>
                    </div>
                </div>
                <div class="row mb-4" style="margin-top: 15px;">
                    <label class="col-sm-3 form-label">Description</label>
                    <div class="col-sm-9">
                        <?=$this->form->desc->show()?>
                    </div>
                </div>
                <div class="row mb-4 toggler" id="dt_request">
                    <label class="col-sm-3 form-label">Date of Request</label>
                    <div class="col-sm-9">
                        <?=$this->form->dtRequest->show()?>
                    </div>
                </div>
                <div class="row mb-4 toggler" id="dt_approval">
                    <label class="col-sm-3 form-label">Date of Approval</label>
                    <div class="col-sm-9">
                        <?=$this->form->dtApproval->show()?>
                    </div>
                </div>
                <div class="row mb-4 toggler" id="dt_from">
                    <label class="col-sm-3 form-label">With effect from </label>
                    <div class="col-sm-9">
                        <?=$this->form->dtWif->show()?>
                    </div>
                </div>
                <div class="row mb-4 toggler" id="dt_end">
                    <label class="col-sm-3 form-label">Leave End Date</label>
                    <div class="col-sm-9">
                        <?=$this->form->dtEnd->show()?>
                    </div>
                </div>
                <div class="row mb-4 toggler" id="leave_docs">
                    <label class="col-sm-3 form-label">Leave Documents</label>
                    <div class="col-sm-9">
                        <?=$this->form->my_files->show()?>
                    </div>
                </div>
            </div>

			<div class="modal-footer">
				<button type="button" class="btn btn-primary submit-alias livepost">Save
					changes</button>
				<button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
			</div>
	</form>
</div>

<script type="text/javascript">           
$(document).ready(function() {
	initDatePicker();
	var source = '<?=APPURL?>'+ 'erp_employee/master/getlive';
	$('#company').on('change',function() {
		getJaxData($('#company').val(),'dept',source);
		$("#doi").attr("mindate",$('#doa').val());
		setDatePicker($('#doi'));
		
	});
	getJaxData($('#company').val(),'dept',source);
    toggleField($('#statusType').val());

    // Attach change event listener to the statusType dropdown
    $('#statusType').on('change', function () {
        toggleField($(this).val());
    });
	
});




function toggleField(type) {
    // Case-specific show and hide logic
    switch (type) {
        case '1':
            // Show all relevant fields for type 1
            $('#dt_from').show();
            $('#leave_docs').show();
            $('#dt_request').show();
            $('#dt_approval').show();
            $('#dt_end').show();
            break;

        case '2':
            // Hide and show specific fields for type 2
             $('#dt_from').show();
            $('#leave_docs').show();
            $('#dt_request').hide();
            $('#dt_approval').hide();
            $('#dt_end').hide(); // Only show dt_end
            break;

        case '3':
            // Hide and show specific fields for type 3
             $('#dt_from').show();
            $('#leave_docs').hide();
            $('#dt_request').show();
            $('#dt_approval').show();
            $('#dt_end').hide(); // Hide dt_end
            break;

        case '4':
            // Hide and show specific fields for type 4
            $('#dt_from').show();
            $('#leave_docs').hide();
            $('#dt_request').hide();
            $('#dt_approval').hide();
            $('#dt_end').hide(); // Hide everything
            break;

        default:
        	 $('.toggler').hide();
            break;
    }
}
$(document).ready(function($) {
	$('.modal-dialog').css('width', '50%');
})
</script>
