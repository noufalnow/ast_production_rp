<?php
/*   __________________________________________________
    |  ##CreativeSol Management Information System##   |
    |__________________________________________________|
*/
 namespace wfDg1; use FNCEI; use Exception; class GetErrorsArrayTest extends BaseTestCase { public function testReturnsEmptyArrayWhenNoErrors() { $this->gump->validate(["\164\145\x73\x74\137\156\x75\x6d\142\x65\x72" => "\61\x31\61"], ["\x74\145\x73\164\137\x6e\x75\155\x62\145\162" => "\156\x75\x6d\x65\162\151\143"]); $this->assertEquals([], $this->gump->get_errors_array()); } public function testReturnsErrorsForFields() { $mncio = $this->gump->validate(["\x74\145\x73\x74\137\156\165\155\142\x65\162" => "\x61\141\x61"], ["\x74\x65\163\164\x5f\156\165\155\142\145\x72" => "\156\165\155\x65\x72\151\143"]); $this->assertEquals(["\164\145\x73\164\137\156\x75\155\x62\145\162" => "\124\150\145\40\124\x65\x73\164\x20\x4e\x75\x6d\x62\x65\162\40\146\151\x65\x6c\x64\x20\x6d\165\163\164\x20\x62\x65\x20\141\x20\x6e\165\155\142\145\162"], $this->gump->get_errors_array()); } public function testReturnsErrorsWithErrorMessageOfCustomValidator() { goto h255g; U0MLS: $this->assertEquals(["\164\x65\x73\x74\137\x6e\165\155\x62\145\162" => "\x43\165\x73\x74\x6f\x6d\x20\145\162\x72\x6f\x72\40\155\x65\163\x73\141\147\145"], $this->gump->get_errors_array()); goto ABn1w; z1Psx: $this->gump->validate(["\x74\145\x73\x74\x5f\156\165\x6d\x62\x65\x72" => "\156\157\164\117\x6b"], ["\x74\x65\x73\x74\137\156\x75\x6d\x62\x65\162" => "\x63\x75\x73\164\x6f\x6d"]); goto U0MLS; h255g: GUMP::add_validator("\143\x75\163\164\157\155", function ($XrxK4, $NGWVv, array $QTxIX = []) { return $NGWVv[$XrxK4] === "\x6f\x6b"; }, "\x43\x75\163\x74\157\155\x20\x65\162\x72\x6f\162\40\155\x65\x73\x73\x61\x67\x65"); goto z1Psx; ABn1w: } public function testErrorMessageReplacesReferencedFieldNameToo() { goto P2lX1; P2lX1: GUMP::set_field_name("\164\x65\x73\x74\137\156\x75\x6d\x62\145\162", "\124\145\x73\164\40\x4e\x75\155\56"); goto I78AZ; vgE3P: $mncio = $this->gump->validate(["\x74\x65\163\164\137\x6e\165\x6d\x62\145\x72" => "\61\61\61", "\157\164\x68\145\x72\137\146\151\x65\x6c\144" => "\x31\61\61\x32"], ["\164\145\163\164\137\x6e\165\155\142\145\162" => "\145\161\x75\141\154\163\x66\x69\x65\x6c\x64\x2c\157\164\x68\145\162\x5f\146\151\x65\x6c\144"]); goto jlN1j; jlN1j: $this->assertEquals(["\x74\x65\163\164\137\x6e\165\155\142\145\x72" => "\x54\x68\x65\40\124\145\x73\164\40\x4e\x75\x6d\56\40\146\151\x65\x6c\144\x20\144\x6f\145\x73\40\156\x6f\x74\40\145\x71\x75\x61\154\x20\124\x68\x65\x20\117\164\150\145\x72\x20\x54\145\163\164\40\x46\151\145\154\x64\40\x66\x69\x65\154\x64"], $this->gump->get_errors_array()); goto wmR1X; I78AZ: GUMP::set_field_name("\x6f\164\150\145\162\x5f\146\x69\145\154\x64", "\x54\150\145\40\117\x74\150\x65\162\x20\x54\145\163\x74\x20\106\x69\145\x6c\144"); goto vgE3P; wmR1X: } public function testErrorMessagePropagatesParamsArrayKeysToErrorMessages() { goto WoFVg; UNLNQ: $mncio = $this->gump->validate(["\146\x69\162\x73\x74\137\164\145\163\164" => "\x6e\x6f\x74\x4f\x6b", "\163\145\x63\157\156\144\x5f\164\x65\x73\x74" => "\x6e\x6f\x74\x4f\153"], ["\146\x69\x72\163\164\x5f\164\145\163\164" => "\x6e\x75\155\x5f\x69\x6e\144\x65\170\54\61\73\x32", "\163\145\x63\x6f\x6e\x64\x5f\x74\x65\163\164" => ["\164\x65\x78\x74\x5f\151\156\144\x65\x78" => ["\164\145\x6e" => 10, "\x74\x77\x65\x6e\164\171" => 20]]]); goto TK544; TK544: $this->assertEquals(["\146\x69\x72\x73\x74\x5f\164\145\x73\x74" => "\x50\141\x72\141\x6d\x65\164\145\162\40\157\x6e\x65\x3a\x20\61\x20\x61\x6e\x64\x20\x70\x61\162\141\x6d\x65\164\145\162\40\164\167\157\72\40\62", "\x73\x65\143\x6f\x6e\x64\137\164\145\x73\164" => "\x50\x61\x72\x61\x6d\145\x74\x65\x72\40\x6f\156\x65\72\x20\61\60\x20\x61\x6e\144\40\160\x61\x72\x61\x6d\x65\164\x65\x72\x20\x74\167\x6f\x3a\x20\62\x30"], $this->gump->get_errors_array()); goto ExnM_; WeZtn: GUMP::add_validator("\164\x65\170\164\x5f\x69\x6e\144\145\170", function ($XrxK4, $NGWVv, array $QTxIX = []) { return $NGWVv[$XrxK4] === "\x6f\x6b"; }, "\120\141\x72\x61\x6d\145\x74\x65\162\x20\157\156\145\72\x20\x7b\160\141\162\x61\155\133\164\x65\x6e\135\175\40\x61\156\x64\x20\x70\x61\162\141\x6d\145\164\x65\x72\40\164\x77\x6f\x3a\x20\x7b\160\141\162\x61\x6d\133\164\x77\145\x6e\164\171\135\175"); goto UNLNQ; WoFVg: GUMP::add_validator("\156\165\155\137\x69\x6e\x64\x65\x78", function ($XrxK4, $NGWVv, array $QTxIX = []) { return $NGWVv[$XrxK4] === "\157\153"; }, "\120\x61\x72\x61\155\x65\x74\x65\x72\x20\x6f\x6e\x65\72\40\173\x70\141\162\141\155\x5b\x30\x5d\x7d\x20\141\156\x64\x20\160\141\162\141\x6d\145\164\145\162\x20\164\x77\x6f\72\x20\x7b\160\x61\162\x61\155\133\61\x5d\x7d"); goto WeZtn; ExnM_: } public function testErrorMessageSplitsArrayParameterWithCommas() { goto KQ3f4; KQ3f4: GUMP::add_validator("\143\x75\x73\164\157\x6d", function ($XrxK4, $NGWVv, array $QTxIX = []) { return $NGWVv[$XrxK4] === "\157\153"; }, "\123\x65\x70\x61\162\x61\164\x65\x64\40\142\171\40\143\x6f\x6d\x6d\141\x3a\x20\x7b\160\x61\162\141\x6d\175"); goto eSztY; eSztY: $mncio = $this->gump->validate(["\x74\x65\x73\164\137\x6e\x75\x6d\x62\145\x72" => "\x6e\x6f\x74\x4f\153"], ["\x74\145\x73\x74\137\x6e\x75\155\142\x65\x72" => "\x63\x75\163\164\x6f\x6d\x2c\61\x3b\62"]); goto niwrK; niwrK: $this->assertEquals(["\164\x65\x73\x74\137\x6e\165\155\142\145\162" => "\123\145\x70\x61\162\x61\164\145\144\40\x62\x79\x20\x63\157\155\x6d\x61\x3a\40\x31\x2c\x20\62"], $this->gump->get_errors_array()); goto ftuju; ftuju: } public function testCustomFieldsErrorMessages() { goto AS3Bh; g2rUF: $this->gump->validate(["\x74\145\163\164\137\x6e\x75\x6d\142\x65\162" => "\61\x32\63"], ["\164\145\163\164\137\156\x75\155\142\145\162" => "\142\x65\164\x77\x65\x65\x6e\137\154\x65\x6e\x2c\x31\73\62"]); goto skyJ6; skyJ6: $this->assertEquals(["\x74\145\x73\x74\x5f\156\165\155\x62\x65\x72" => "\124\x65\163\164\40\x4e\165\x6d\x62\x65\x72\40\x6c\x65\156\x67\164\150\x20\115\x55\x53\124\40\142\145\40\142\x65\164\x77\x65\x65\156\40\x31\x20\x61\x6e\x64\40\62\40\x21\41\41"], $this->gump->get_errors_array()); goto K9Ro8; AS3Bh: $this->gump->set_fields_error_messages(["\164\145\163\x74\x5f\156\x75\155\x62\145\162" => ["\x62\145\x74\x77\145\x65\156\x5f\154\x65\x6e" => "\x7b\x66\151\x65\154\144\175\x20\x6c\x65\x6e\x67\164\150\40\115\x55\x53\124\x20\142\145\40\x62\x65\164\167\145\x65\x6e\x20\173\x70\x61\x72\141\155\x5b\60\x5d\175\x20\141\156\x64\x20\x7b\x70\x61\x72\x61\155\133\x31\135\175\40\41\41\41"]]); goto g2rUF; K9Ro8: } public function testWhenIntegratedValidatorDoesNotHaveErrorMessageThrowsExceptionOnFailure() { goto IdgVp; NStN9: $this->expectExceptionMessage("\x27\151\x6e\164\x65\x67\x72\x61\164\145\x64\47\x20\166\x61\154\x69\x64\x61\x74\x6f\x72\40\144\157\x65\x73\x20\156\157\164\40\150\141\166\x65\40\141\156\40\x65\162\x72\x6f\x72\x20\155\x65\x73\163\x61\147\x65\x2e"); goto dVIpL; xbm4R: $this->expectException(Exception::class); goto NStN9; dVIpL: $fHAnW->get_errors_array(); goto quxYN; IdgVp: $fHAnW = new class extends GUMP { protected function validate_integrated($XrxK4, $NGWVv, array $QTxIX = []) { return $NGWVv[$XrxK4] === "\x6f\153"; } }; goto vOmEw; vOmEw: $mncio = $fHAnW->validate(["\x74\x65\x73\x74" => "\x6e\x6f\x74\117\x6b"], ["\x74\x65\x73\164" => "\151\x6e\164\145\x67\x72\x61\x74\145\144\54\160\x61\162\x61\x6d\145\164\x65\162\126\141\x6c\165\145"]); goto xbm4R; quxYN: } public function testWhenIntegratedValidatorHasErrorMessagePrintsItOut() { goto HYU0v; HYU0v: $fHAnW = new class extends GUMP { protected function validate_integrated($XrxK4, $NGWVv, array $QTxIX = []) { return $NGWVv[$XrxK4] === "\157\153"; } }; goto KS4T9; kMA0h: $this->assertEquals(["\164\145\163\x74" => "\124\145\163\x74\x20\166\x61\x6c\165\145\40\151\163\x20\156\157\x74\x20\x63\x6f\x72\162\x65\143\164"], $fHAnW->get_errors_array()); goto bDWWO; KS4T9: GUMP::set_error_message("\x69\156\164\145\147\162\x61\164\145\144", "\x7b\146\151\145\154\144\175\x20\x76\141\154\165\145\x20\151\163\40\156\157\164\x20\x63\157\x72\x72\145\143\164"); goto XdQRO; XdQRO: $mncio = $fHAnW->validate(["\x74\145\163\x74" => "\156\x6f\164\117\x6b"], ["\164\x65\x73\x74" => "\151\x6e\x74\x65\x67\162\141\x74\145\144\x2c\160\x61\162\x61\155\145\x74\145\x72\126\x61\154\165\145"]); goto kMA0h; bDWWO: } }
